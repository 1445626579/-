# 浏览器工作原理

## chrome浏览器进程

chrome浏览器是多进程的，打开一个页面时，会同时打开多个进程，其中包括：
1. 主进程
2. 网络进程
3. GPU进程
4. 插件进程
5. 渲染进程。

除了渲染进程外，其他进程是共用的
### 主进程
主进程主要负责界面显示、用户交互、子进程管理和存储功能

### 网络进程
负责页面的网络加载功能

### 渲染进程
负责将html、css和js转换为可以和用户交互的页面，排版引擎Blink和V8引擎都在该进程之中。
默认情况下chrome会为每一个tab页创建一个渲染进程，但当tab页的域名相同时会公用一个渲染进程。
出于安全考虑,渲染进程运行再安全沙箱之中。

### GPU进程
起初为了实现3D CSS效果，后来网页、UI界面都是用此引擎绘制

### 插件进程
主要负责运行插件，因为插件容易引起崩溃，所以使用插件进程进行隔离，用来保证插件崩溃不会引起页面和浏览器造成影响

## http请求流程
http协议建立在tcp协议之上。http协议是一种允许浏览器向服务器发起请求的协议。

### 1.准备请求
### 2.查找本地缓存
当同一网站再次发起请求时，请求速度会变快，这是因为浏览器对文件进行了缓存，当发起请求时会先在本地查找是否存在缓存文件，如果存在缓存文件会立即返回。如果不存在发起请求
### 3.准备IP地址和端口
由于http请求是建立在tcp连接之上的，而tcp连接是通过IP和端口进行连接的，所以必须需要将域名转换为ip地址
通过请求DNS（Domain Nanme System）将域名解析成IP地址和端口。浏览器同时对DNS进行了缓存，当域名存在DNS缓存中时，直接使用了DNS缓存，否则请求DNS。
### 4.等待tcp队列
chrome浏览器限制同时最多6个tcp连接，当多余6个时进入等待队列
### 5.建立tcp连接
三次握手建立tcp连接
### 6.发送http请求

#### 一、 http请求中包含以下三个部分
 1. 请求行
  请求行中包括协议版本，方法和URI（统一资源标志符）
 2. 请求头
 请求行发送之后，请求头中包括请求地址、浏览器信息和cookie等，也可以自定义一些请求头信息
 3. 请求体
 post请求的请求内容会放在请求体中。
 
#### 二、 http响应中包含以下三个部分
1. 响应行
响应行中包含返回的状态码和协议版本
2. 响应头
响应头中包含服务器响应的时间，返回的内容格式、服务端要在客户端存储的cookie等。
3. 响应体
响应体则是此次请求的实际内容了
### 断开连接
请求完成之后经过四次挥手断开连接
### 重定向
当服务器返回状态码为301时进行了重定向，浏览器会向响应头中的location重新发起请求
